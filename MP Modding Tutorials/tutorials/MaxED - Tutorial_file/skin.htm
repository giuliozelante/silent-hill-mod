<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0062)http://www.rockstargames.com/maxpayne2/mods/tutorials/skin.htm -->
<HTML><HEAD><TITLE>MaxED - Skinning</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-2">
<META http-equiv=Content-Language content=en-us>
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<META content=FrontPage.Editor.Document name=ProgId><LINK 
href="skin_file/style.css" type=text/css rel=stylesheet></HEAD>
<BODY>
<TABLE cellSpacing=0 cellPadding=0 width=640 border=0>
  <TBODY>
  <TR>
    <TD>
      <P align=left>&nbsp;</P>
      <H1 align=left>Skin Tutorial</H1>
      <BLOCKQUOTE>
        <P>This tutorial explains you step by step how to create and export your 
        own character skins<BR>to the game by using 3D Studio Max 5.1, Character 
        Studio 4 and Remedy 3D Studio Plugins.<BR>The tutorial requires that you 
        already have some working experience with both 3DS Max and<BR>Character 
        Studio.</P>
        <P>Related files are available in here: <A 
        href="http://www.rockstargames.com/maxpayne2/mods/tutorials/downloads/Skin_examples.zip"><B>Skin_examples.zip</B></A></P>
        <P><B>NOTE:</B> If you want to skip the skin-to-skeleton attachment 
        process and just try out<BR>the KF2-Exporter, there is a 
        _ExportPose.max-file for every example skin included<BR>in the tutorial. 
        The files contain a pre-weighted skin attached to a skeleton that<BR>is 
        ready for export.</P></BLOCKQUOTE>
      <H2>Configuring 3D Studio Max</H2>
      <BLOCKQUOTE>
        <P>Before starting, set your 3DS Max units to Centimeters.</P>
        <UL>
          <LI>Customize/Unit Setup-&gt;Metric/Centimeters </LI></UL></BLOCKQUOTE>
      <H2>Skeleton Setup</H2>
      <BLOCKQUOTE>
        <P>Load the "Male" or "Female"-skeleton (Male_SkinModeling_Pose.max 
        or<BR>Female_SkinModeling_Pose.max)</P>
        <UL>
          <LI>Select "Bip01" 
          <LI>Under "Keyframing Tools" uncheck "Body Space Neck rotation"&nbsp; 
          <LI>Turn on Figure Mode by clicking on the "FigureMode On/Off"-icon. 
          The icon turns<BR>yellow when Figure Mode is on. </LI></UL>
        <P align=center><IMG height=124 
        src="skin_file/skin_remedytoolsicons.gif" width=128 
      border=0></P></BLOCKQUOTE>
      <H2>Merging your Skin to the scene</H2>
      <BLOCKQUOTE>
        <P>From the File Menu click Merge. Browse to your character model and 
        merge it.</P>
        <P>Alternatively you can merge one of the included character skins. The 
        available skins are:</P>
        <UL>
          <LI>MaxPayne_Skin.max (male) 
          <LI>Cleaner_A_Skin.max (male) 
          <LI>MonaSax_B_Skin.max (female) </LI></UL>
        <P>If you choose to use one of these skins, you can skip the following 
        steps and go straight to<BR>"Merging your Skin to the 
        Skeleton".&nbsp;</P>
        <UL>
          <LI>Collapse your skin into a single "Editable Mesh"-object 
          <LI>Select all faces and assign them all to Smoothing Group 1 
          <LI>Check that your character's joints conform to the skeleton joints 
          as well as possible. 
          <LI>Clean up your mesh: unify normals, remove double faces, edges and 
          stray vertices.<BR>Use "STL Check" and "Normal"-modifiers to do this. 
          <LI>Reset Xform. From the Utilities tab click on "Reset Xform" to 
          reset the character<BR>scale and transforms. Go to the modifier stack 
          and collapse the stack again to Editable<BR>Mesh. 
          <LI>Move the skin's Pivot to World origin. From Hierarchy/Pivot/Adjust 
          Pivot click<BR>"Affect Pivot Only" and move the pivot to World origin 
          (0,0,0). Under Adjust<BR>Pivot/Alignment click "Align to World". 
        </LI></UL></BLOCKQUOTE>
      <H2>Materials</H2>
      <BLOCKQUOTE>
        <P>Open the Material Editor and choose "KF Material" as the material 
        type. The&nbsp;<BR>"KF Material" is the only material type supported by 
        the game's skins.</P></BLOCKQUOTE>
      <P align=center><IMG height=359 src="skin_file/skin_material_1.jpg" 
      width=500 border=0></P>
      <BLOCKQUOTE>
        <P>Check "Diffuse", click on the material slot next to it and choose 
        "Bitmap" from<BR>the list.</P></BLOCKQUOTE>
      <P align=center><IMG height=425 src="skin_file/skin_material_2.jpg" 
      width=500 border=0></P>
      <BLOCKQUOTE>
        <P>The only supported bitmap type is .DDS. Apply the material to the 
        skin.</P>
        <P>Use the "Multi/Sub-Object" material to apply multiple KF materials on 
        one skin<BR>The Multi/Sub-Object material slot numbers correspond to the 
        "Material ID" numbers<BR>under Editable Mesh. Open one of the included 
        skin files for further reference.</P></BLOCKQUOTE>
      <H2>Merging your Skin to the Skeleton</H2>
      <BLOCKQUOTE>
        <UL>
          <LI>Select your skin 
          <LI>Apply Physique modifier 
          <LI>From the Physique Level of Detail/Skin Update choose Deformable 
          and uncheck all<BR>except Link Blending. From Stack Updates check 
          "Reassign Globally" </LI></UL></BLOCKQUOTE>
      <P align=center><IMG height=232 
      src="skin_file/skin_physiqueinitiliazation1.gif" width=95 border=0></P>
      <BLOCKQUOTE>
        <UL>
          <LI>Click "Attach to Node" and from the rollout choose "Bip01" 
          <LI>From the Physique Initialization/Link Settings uncheck Continuity 
          and from<BR>Vertex - Link Assignment/Blending Between Links choose "4 
          links" and uncheck Create<BR>Envelopes. Click "Initialize". 
      </LI></UL></BLOCKQUOTE>
      <P align=center><IMG height=225 
      src="skin_file/skin_physiqueinitiliazation2.gif" width=500 border=0></P>
      <BLOCKQUOTE>
        <UL>
          <LI>Disable the unused links. This is done in order to avoid any 
          problems while&nbsp;<BR>loading/saving the skin's vertex weights. 
          Under Physique/Link choose the unused links<BR>and disable them by 
          unchecking Active from the Link Settings. The deactivated 
          links&nbsp;<BR>will turn black.&nbsp; </LI></UL></BLOCKQUOTE>
      <P align=center><IMG height=439 src="skin_file/skin_skeleton_unused_1.jpg" 
      width=600 border=0><BR><IMG height=439 
      src="skin_file/skin_skeleton_unused_2.jpg" width=600 border=0><BR><IMG 
      height=439 src="skin_file/skin_skeleton_unused_3.jpg" width=600 
      border=0><BR><IMG height=439 src="skin_file/skin_skeleton_unused_4.jpg" 
      width=600 border=0></P>
      <H2>Vertex Weighting</H2>
      <BLOCKQUOTE>
        <P>The vertex weighting is done the same way as any other character 
        skinning in Character<BR>Studio. The only limitations are that you can 
        1) only weight your vertices to a maximum<BR>of four bones and 2) none 
        of the vertices' weight values can go to zero. You can check<BR>if your 
        model meets these limitations by using the "Remedy Physique Tool".</P>
        <P><B>NOTE:</B> If you chose to use one of the skins we provided for the 
        this tutorial, you can<BR>load their weighting directly from the 
        _weights.txt-files. Jump to the next chapter to<BR>learn how to Load and 
        Save vertex weights.</P>
        <UL>
          <LI>Select Editable Mesh from your skin's modifier stack 
          <LI>Click the "Remedy Physique Tool"-icon </LI></UL></BLOCKQUOTE>
      <P align=center><IMG height=291 src="skin_file/skin_rmd_phytool.gif" 
      width=107 border=0></P>
      <BLOCKQUOTE>
        <P>A window opens, displaying the skin's vertex-to-bone influence 
        distribution. In our<BR>example picture we can see how MonaSax_B's 2399 
        vertices are weighted: 1824 vertices<BR>are weighted to one bone, 521 to 
        two bones, 53 to 3 bones and 1 vertex<BR>to 4 bones. No vertices are 
        weighted to more than 4 bones or are below the tolerance<BR>weight or 
        zero. If your skin has any of these problematic vertices do the 
        following:</P>
        <UL>
          <LI>Click the + button next to the "&gt;4 Bones" to select and show 
          the problem vertices. 
          <LI>Click "Kill Lowest Influence Node" to remove the least affecting 
          bone from the<BR>vertices' weighting. 
          <LI>Click the + button next to the "Below Tolerance" to select and 
          show the problem<BR>vertices. 
          <LI>Click "Kill Nodes Below Tolerance" to remove any zero weights from 
          the weighting. 
          <LI>Click Refresh and check if any vertices have appeared that have "0 
          bone" weights.<BR>Every vertex must be weighted to at least one bone. 
          </LI></UL>
        <P><B>Tip: </B>Lock vertices before modifying the underlying skin. This 
        way you avoid messing<BR>up the vertex weights when making 
        modifications.&nbsp;</P></BLOCKQUOTE>
      <H2>Loading/Saving Vertex Weights</H2>
      <BLOCKQUOTE>
        <P>To Save and Load your skin's vertex weights click the "MP2_SaveLoad" 
        icon.</P>
        <P align=center><IMG height=222 src="skin_file/skin_mp2saveload.gif" 
        width=117 border=0></P>
        <P>In the bottom of the rollout there are three buttons. The Save/Load 
        vertex weights are<BR>self-explanatory. You can load old skin weights to 
        any new model, but the results will<BR>not be predictable if the new 
        model varies greatly from the original.&nbsp;<BR>"Load indexed weights" 
        works only if the skin's vertex count hasn't been changed 
        (no<BR>vertices have been added or deleted).</P></BLOCKQUOTE>
      <H2>Exporting .KF2</H2>
      <BLOCKQUOTE>
        <P>Before exporting, check that all the skin transforms are reset 
        (Position [0,0,0], Rotation<BR>[0,0,0] and Scale [100,100,100]). If not, 
        choose Hierarchy-&gt;Adjust Transform and click<BR>Reset: Transform and 
        Scale. Check also that the pivot is still located at the 
        origo<BR>(0,0,0).</P>
        <UL>
          <LI>Remove zero vertex weights and &gt;4 bone weight assignments by 
          using the "Remedy Physique<BR>Tool" 
          <LI>Select "Bip01" 
          <LI>Apply Figure Mode 
          <LI>Load the Male or Female SkinExport_Pose.fig, depending on your 
          base skeleton type.<BR>The skin's fingers curl up to the export pose. 
          You can revert your biped back to its<BR>original modeling pose by 
          loading Male or Female SkinModeling_Pose.fig. 
          <LI>From the File Menu choose "Export". Browse to your desired export 
          directory.<BR>Under "Save as Type" choose "KF2 Exporter". Use the 
          following settings: 
          <LI>[KF2_Exporter.psd]. 
          <LI>Press OK. </LI></UL></BLOCKQUOTE>
      <H2>Adding a new Skin to the game</H2>
      <BLOCKQUOTE>If you want the skin to be a player controllable character 
        (like Max Payne or<BR>Mona Sax), you should begin by duplicating the 
        "database\skins\MaxPayne.txt" to<BR>a new file name such as 
        "database\skins\MySkin.txt". Then create a new folder<BR>called "MySkin" 
        and copy your 3dsmax exported "MySkin.kf2" and "MySkin.skd"<BR>files 
        there. Then edit (at the bottom of the file) the "MySkin.txt" to use 
        your<BR>own .kf2 and .skd files. 
        <P>If you want to add a new enemy to the game, you should use the same 
        process,<BR>but begin with one of the Cleaner skins for example. This is 
        as the player<BR>skins require very different skeletal movement and 
        other definitions to 
work<BR>properly.<BR></P></BLOCKQUOTE></TD></TR></TBODY></TABLE></BODY></HTML>
